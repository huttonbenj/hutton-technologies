spec:
  name: hutton-technologies
  region: nyc
  services:
  - name: api
    github:
      repo: huttonbenj/hutton-technologies
      branch: main
      deploy_on_push: true
    dockerfile_path: backend/Dockerfile
    source_dir: backend
    http_port: 8000
    instance_count: 1
    instance_size_slug: basic-xxs
    envs:
    - key: CORS_ORIGINS
      value: "https://huttontechnologies.com,https://www.huttontechnologies.com"
      scope: RUN_TIME
  - name: web
    github:
      repo: huttonbenj/hutton-technologies
      branch: main
      deploy_on_push: true
    dockerfile_path: frontend/Dockerfile
    source_dir: frontend
    http_port: 3000
    instance_count: 1
    instance_size_slug: basic-xxs
    envs:
    - key: NEXT_PUBLIC_API_URL
      value: "${api.PUBLIC_URL}"
      scope: RUN_AND_BUILD_TIME
